---
title: "个人项目"
date: 2024-06-02
draft: true
metaAlignment: center
categories:
- 项目经验
tags:
- 项目经验
- 项目部署
---

<!--more-->

她拍百万日活

注册用户：400w - 500w


DAU：100w
PV：DAU x 10 = 1000w
单页面平均 3 个接口
总接口数：PV x 3 = 3000w
根据二八定律：每天 80% 的访问集中在 20% 的时间里，20% 时间就叫做峰值时间；

公式：( 总接口数 * 80% ) / ( 每天秒数 * 20% ) = 峰值时间每秒请求数(QPS)
机器：峰值时间每秒QPS / 单台机器的QPS = 需要的机器

QPS：(3000w x 0.8) / (86400 x 0.2) ≈ 1389
单机QPS：1389 / 6 ≈ 231


Feed 流热点数据缓存

LRU 算法：最近最少使用
sort set：value：帖子ID sorce：时间戳
String：key：帖子ID value：帖子JSON

单页10条数据，单次查询15条数据 ？？？


1、神策数据平台，推送用户喜欢的帖子ID，获取缓存数据；

2、没有缓存的帖子，数据库获取

* 查询数据库
* 异步发送消息：ids、时间戳




